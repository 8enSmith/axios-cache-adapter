{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 029a951099433e8f151c","webpack:///external {\"umd\":\"lodash-es/omit\",\"amd\":\"lodash-es/omit\",\"commonjs\":\"lodash-es/omit\",\"commonjs2\":\"lodash-es/omit\"}","webpack:///./src/index.js","webpack:///external {\"umd\":\"axios\",\"amd\":\"axios\",\"commonjs\":\"axios\",\"commonjs2\":\"axios\"}","webpack:///external {\"umd\":\"lodash-es/partial\",\"amd\":\"lodash-es/partial\",\"commonjs\":\"lodash-es/partial\",\"commonjs2\":\"lodash-es/partial\"}","webpack:///external {\"umd\":\"lodash-es/extend\",\"amd\":\"lodash-es/extend\",\"commonjs\":\"lodash-es/extend\",\"commonjs2\":\"lodash-es/extend\"}","webpack:///./src/read-cache.js","webpack:///./src/serialize.js","webpack:///./src/memory.js","webpack:///./src/exclude.js"],"names":["setupCache","config","store","key","req","url","maxAge","readCache","serialize","clearOnStale","undefined","debug","exclude","query","paths","filter","args","log","response","uuid","res","type","status","indexOf","responseType","expires","Date","now","setItem","data","then","request","next","Promise","reject","method","toLowerCase","removeItem","getItem","value","fromCache","catch","err","reason","adapter","resolve","defaults","defaultOptions","cache","setup","options","axiosOptions","create","lib","module","exports","error","Error","message","JSON","parse","e","MemoryStore","_store","exclusions","match","found","forEach","regexp"],"mappings":"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","file":"cache.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-es/omit\"), require(\"axios\"), require(\"lodash-es/partial\"), require(\"lodash-es/extend\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-es/omit\", \"axios\", \"lodash-es/partial\", \"lodash-es/extend\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"axiosCacheAdapter\"] = factory(require(\"lodash-es/omit\"), require(\"axios\"), require(\"lodash-es/partial\"), require(\"lodash-es/extend\"));\n\telse\n\t\troot[\"axiosCacheAdapter\"] = factory(root[undefined], root[undefined], root[undefined], root[undefined]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 029a951099433e8f151c","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"umd\":\"lodash-es/omit\",\"amd\":\"lodash-es/omit\",\"commonjs\":\"lodash-es/omit\",\"commonjs2\":\"lodash-es/omit\"}\n// module id = 0\n// module chunks = 0","import axios from 'axios'\n\nimport partial from 'lodash-es/partial'\nimport extend from 'lodash-es/extend'\nimport omit from 'lodash-es/omit'\n\nimport readCache from './read-cache'\nimport serialize from './serialize'\nimport MemoryStore from './memory'\nimport exclude from './exclude'\n\nfunction setupCache (config = {}) {\n  config.store = config.store || new MemoryStore()\n  const key = config.key || (req => req.url)\n\n  config.maxAge = config.maxAge || 0\n  config.readCache = config.readCache || readCache\n  config.serialize = config.serialize || serialize\n  config.clearOnStale = config.clearOnStale !== undefined ? config.clearOnStale : true\n  config.debug = config.debug || false\n\n  config.exclude = config.exclude || {}\n  config.exclude.query = config.exclude.query || true\n  config.exclude.paths = config.exclude.paths || []\n  config.exclude.filter = config.exclude.filter || null\n\n  if (config.debug !== false) {\n    config.debug = typeof config.debug === 'function'\n      ? config.debug\n      : (...args) => console.log('[axios-cache-adapter]', ...args)\n  } else {\n    config.debug = () => {}\n  }\n\n  function response (req, uuid, res) {\n    const type = res.status / 100 | 0\n\n    // only cache 2xx response\n    if (type !== 2) {\n      return res\n    }\n\n    // exclude binary response from cache\n    if (['arraybuffer', 'blob'].indexOf(res.responseType) > -1) {\n      return res\n    }\n\n    let expires = config.maxAge === 0 ? 0 : Date.now() + config.maxAge\n\n    return config.store.setItem(uuid, { expires, data: config.serialize(req, res, config.debug) }).then(() => res)\n  }\n\n  function request (req) {\n    const uuid = key(req)\n    const next = partial(response, req, uuid)\n\n    if (exclude(req, config.exclude)) {\n      return Promise.reject(next)\n    }\n\n    // clear cache if method different from GET.\n    // We should exclude HEAD\n    const method = req.method.toLowerCase()\n\n    if (method === 'head') {\n      return Promise.reject(next)\n    }\n\n    if (method !== 'get') {\n      config.store.removeItem(uuid)\n      return Promise.reject(next)\n    }\n\n    return config.store.getItem(uuid).then(value => {\n      return config.readCache(req, config.debug)(value)\n        .then(data => {\n          data.config = req\n          data.request = { fromCache: true }\n\n          return data\n        })\n        .catch(err => {\n          // clean up cache if stale\n          if (config.clearOnStale && err.reason === 'cache-stale') {\n            return config.store.removeItem(uuid)\n              .then(() => Promise.reject(next))\n          }\n\n          return Promise.reject(next)\n        })\n    })\n  }\n\n  function adapter (config) {\n    return new Promise((resolve, reject) => {\n      return request(config)\n        .then(response => resolve(response))\n        .catch(response => {\n          return axios.defaults.adapter(config)\n            .then(response)\n            .then(res => resolve(res))\n            .catch(err => reject(err))\n        })\n    })\n  }\n\n  return {\n    adapter,\n    store: config.store\n  }\n}\n\nconst defaultOptions = {\n  cache: {\n    maxAge: 15 * 60 * 1000\n  }\n}\n\nfunction setup (options) {\n  options = extend({}, defaultOptions, options)\n\n  const cache = setupCache(options.cache)\n  const axiosOptions = omit(options, ['cache'])\n\n  const request = axios.create(extend({}, axiosOptions, { adapter: cache.adapter }))\n\n  request.cache = cache\n\n  return request\n}\n\nconst lib = {\n  setupCache,\n  setup\n}\n\nexport default lib\nmodule.exports = lib\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"umd\":\"axios\",\"amd\":\"axios\",\"commonjs\":\"axios\",\"commonjs2\":\"axios\"}\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"umd\":\"lodash-es/partial\",\"amd\":\"lodash-es/partial\",\"commonjs\":\"lodash-es/partial\",\"commonjs2\":\"lodash-es/partial\"}\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"umd\":\"lodash-es/extend\",\"amd\":\"lodash-es/extend\",\"commonjs\":\"lodash-es/extend\",\"commonjs2\":\"lodash-es/extend\"}\n// module id = 4\n// module chunks = 0","// import hydrate from './hydrate'\n\nexport default function (req, log) {\n  return function (value) {\n    return new Promise((resolve, reject) => {\n      if (!value || !value.data) {\n        log('cache-miss', req.url)\n        const error = new Error()\n\n        error.reason = 'cache-miss'\n        error.message = 'Value not found from cache'\n        return reject(error)\n      }\n\n      const { expires, data } = value\n\n      if (expires !== 0 && (expires < Date.now())) {\n        log('cache-stale', req.url)\n        const error = new Error()\n\n        error.reason = 'cache-stale'\n        error.message = 'Value is stale'\n        return reject(error)\n      }\n\n      // // hydrate pseudo xhr from cached value\n      // req.xhr = hydrate(data)\n      //\n      // // override request end callback\n      // req.callback = (err, res) => {\n      //   log('cache-hit', req.url)\n      //\n      //   if (err) {\n      //     return reject(err, res)\n      //   }\n      //\n      //   resolve(res)\n      // }\n\n      log('cache-hit', req.url)\n\n      return resolve(data)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/read-cache.js","import omit from 'lodash-es/omit'\n\nexport default function serialize (req, res, log) {\n  if (res.data) {\n    try {\n      res.data = JSON.parse(res.data)\n    } catch (e) {\n      log('Could not parse data as JSON')\n    }\n  }\n\n  return omit(res, ['request', 'config'])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/serialize.js","class MemoryStore {\n  constructor () {\n    this._store = {}\n  }\n\n  getItem (key) {\n    return Promise.resolve(this._store[key] || null)\n  }\n\n  setItem (key, value) {\n    this._store[key] = value\n    return Promise.resolve(value)\n  }\n\n  clear () {\n    this._store = {}\n    return Promise.resolve()\n  }\n}\n\nexport default MemoryStore\n\n\n\n// WEBPACK FOOTER //\n// ./src/memory.js","export default function exclude (req, exclusions = {}) {\n  if ((typeof exclusions.filter === 'function') && !exclusions.filter(req)) {\n    return true\n  }\n\n  // do not cache request with query\n  if (exclusions.query && req.url.match(/\\?.*$/)) {\n    return true\n  }\n\n  let found = false\n  const paths = exclusions.paths || []\n\n  paths.forEach(regexp => {\n    if (req.url.match(regexp)) {\n      found = true\n      return found\n    }\n  })\n\n  if (found) {\n    return true\n  }\n\n  // All rules explained. fo not rewrite regexp.\n  return false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/exclude.js"],"sourceRoot":""}